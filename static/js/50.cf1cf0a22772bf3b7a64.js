webpackJsonp([50],{"/Knc":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("mvHQ"),a=n.n(s),o=n("//Fk"),i=n.n(o),r={components:{headerNavBack:n("Hdn/").a},data:function(){return{user:{},phone:"",yzm:"",bool:!0,code:"",centerTitle:"手机号找回密码",timeInterval:null}},destroyed:function(){this.timeInterval=null},methods:{findUser:function(){var e=this;return new i.a(function(t,n){e.axios.get("/api/findUser",{params:{phone:e.phone}}).then(function(e){t(e)}).catch(function(e){n(e)})})},back:function(){this.$router.go(-1)},submitBtn:function(){var e=this;0!=this.phone.length?0!=this.yzm.length?this.axios.post("/api/user/passwdByCompare",{comparePasswd:this.yzm,comparedPasswd:sessionStorage.getItem("code")}).then(function(t){t.data.content?e.$router.push({name:"changePwdPassedPhone",params:{phone:t.data.content.user.mobile}}):e.$Toast({message:"验证码输入错误",position:"middle",duration:1e3})}).catch(function(e){}):this.$Toast({message:"请输入验证码",position:"middle",duration:1e3}):this.$Toast({message:"请输入手机号",position:"middle",duration:1e3})},getCode:function(){var e=this;0!==this.phone.length?this.bool?(this.bool=!1,this.findUser().then(function(t){t.data&&"success"===t.data.status?e.axios.post("/api/sendCaptcha",{phone:e.phone,typeId:t.data.result[0].user.userId,type:"RESET_PWD"}).then(function(t){if("failure"!==t.data.status){e.bool=!e.bool;var n=60;e.timeInterval=window.setInterval(function(){--n>=0?e.$refs.getYzmCode.innerText=n+"秒后重新获取":(clearInterval(e.timeInterval),e.$refs.getYzmCode.innerText="获取验证码",e.bool=!0)},1e3),sessionStorage.setItem("code",t.data.content)}else e.$Toast({message:t.data.result,position:"middle",duration:1e3}),e.bool=!1,clearInterval(e.timeInterval),sessionStorage.setItem("code_msg",a()(t.data.result))}).catch(function(e){}):(e.$Toast({message:t.data.result,position:"middle",duration:1e3}),clearInterval(e.timeInterval),sessionStorage.setItem("code_msg",a()(t.data.result)),e.bool=!1)}).catch(function(e){})):this.$Toast({message:JSON.parse(sessionStorage.getItem("code_msg")).errMsg||sessionStorage.getItem("code_msg").replace(/"/g,""),position:"middle",duration:1e3}):this.$Toast({message:"请填写手机号码",position:"middle",duration:1e3})}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("headerNavBack",{attrs:{centerTitle:e.centerTitle}}),e._v(" "),n("div",{staticClass:"area"},[n("div",[n("span",[e._v("手机号")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],ref:"initPhone",attrs:{placeholder:"请输入要找回的手机号",type:"text",autocomplete:"off"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),e._v(" "),n("div",{attrs:{id:"yzm"}},[n("span",[e._v("验证码")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.yzm,expression:"yzm"}],ref:"yzm",attrs:{placeholder:"请输入验证码",type:"text",autocomplete:"off"},domProps:{value:e.yzm},on:{input:function(t){t.target.composing||(e.yzm=t.target.value)}}}),e._v(" "),n("span",{ref:"getYzmCode",staticClass:"yzm",on:{click:e.getCode}},[e._v("获取验证码")])])]),e._v(" "),n("div",{staticClass:"submitBtn"},[n("button",{on:{click:e.submitBtn}},[e._v("下一步")]),e._v(" "),n("br"),e._v(" "),n("span",[e._v("若手机号未绑定或无法获取验证码请联系班主任老师！")])])],1)},staticRenderFns:[]};var c=n("VU/8")(r,d,!1,function(e){n("yJB3")},"data-v-b09d15de",null);t.default=c.exports},yJB3:function(e,t){}});
//# sourceMappingURL=50.cf1cf0a22772bf3b7a64.js.map
webpackJsonp([47],{"6f5c":function(t,e){},Vbfo:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={components:{loading:loading,topic:topic},data:function(){return{page:1,account:"",commentList:new Array,baseUrl:"http://192.168.124.4:8081",commentTotal:0,loadingMoreComment:"加载更多"}},created:function(){this.loadingCommentList()},methods:{loadingCommentList:function(){var t=this;this.axios.get("/api/getWorksCommentList",{params:{worksId:this.$route.params.id,page:this.page}}).then(function(e){t.commentTotal=e.data.result.total,e.data.result.list.length>0?(t.loadingMoreComment="加载更多",e.data.result.list.forEach(function(e){e.commentE.user&&-1==e.commentE.user.avatar.indexOf("http")&&(e.commentE.user.avatar=t.baseUrl+e.commentE.user.avatar),e.parentCommentE&&-1==e.parentCommentE.user.avatar.indexOf("http")&&(e.parentCommentE.user.avatar=t.baseUrl+e.parentCommentE.user.avatar)}),t.commentList.length>0?t.commentList=t.commentList.concat(e.data.result.list):t.commentList=e.data.result.list):(t.$Toast({message:"没有更多评论了",position:"middle",duration:500}),t.loadingMoreComment="没有更多评论了"),t.account=e.data.account}).catch(function(t){})},loadingMore:function(){var t=this;this.page++,this.showLoading=1,this.loadingCommentList(),setTimeout(function(){t.showLoading=0},500)},replayComment:function(t){this.$emit("replayComment",t.commentE)},enterPerCenter:function(t){this.$router.push({name:"perWorkCircle",params:{id:t.userId}})},deletionComment:function(t,e,n){var o=this;this.axios.get("/api/user/delectWorksCommentE",{params:{commentIds:t.commentE.commentId}}).then(function(t){"success"==t.data.status?(n.splice(e,1),o.$Toast({message:"删除评论成功",position:"middle",duration:500})):o.$Toast({message:"删除评论失败",position:"middle",duration:500})}).catch(function(t){})},changeTopic:function(t,e){var n=this;this.topicTitle=t,this.showTopic=1,setTimeout(function(){n.showTopic=0},e)}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.commentList&&t.commentList.length>0?n("div",[t._l(t.commentList,function(e,o){return e.parentCommentE?t._e():n("div",{key:o,staticClass:"comment_mutual"},[n("div",[n("img",{attrs:{src:e.commentE.user?e.commentE.user.avatar:"",alt:"评论头像"},on:{click:function(n){t.enterPerCenter(e.commentE.user)}}})]),t._v(" "),n("div",[n("p",[t._v(t._s(e.commentE.user.nickname))]),t._v(" "),n("p",[t._v(t._s(t._f("dateFm")(e.commentE.commentDate)))]),t._v(" "),n("p",[t._v("\n        "+t._s(e.commentE.commentsSection)+"\n      ")])]),t._v(" "),t.account?n("div",[e.commentE.user&&e.commentE.user.userId!=t.account?n("span",{on:{click:function(n){t.replayComment(e)}}},[t._v("回复")]):t._e(),t._v(" "),e.commentE.user&&e.commentE.user.userId==t.account?n("div",{staticClass:"delet-comment",on:{click:function(n){t.deletionComment(e,o,t.commentList)}}},[t._v("删除")]):t._e()]):t._e()])}),t._v(" "),t._l(t.commentList,function(e,o){return e.parentCommentE?n("div",{key:o,staticClass:"comment_mutual"},[n("div",[n("img",{attrs:{src:e.commentE.user?e.commentE.user.avatar:"",alt:"评论头像"},on:{click:function(n){t.enterPerCenter(e.parentCommentE.user)}}})]),t._v(" "),n("div",[n("p",[t._v(t._s(e.commentE.user.nickname))]),t._v(" "),n("p",[t._v(t._s(t._f("dateFm")(e.commentE.commentDate)))]),t._v(" "),n("div",[t._v(t._s(e.commentE.commentsSection))]),t._v(" "),n("div",[n("p",{staticClass:"replayUserName"},[t._v(t._s(e.parentCommentE.user.nickname)+":")]),t._v(" "),n("p",[t._v("\n          "+t._s(e.parentCommentE.commentsSection)+"\n        ")])])]),t._v(" "),t.account?n("div",[e.commentE.user&&e.commentE.user.userId!=t.account&&!e.commentE.replyCommentId?n("span",{on:{click:function(n){t.replayComment(e)}}},[t._v("回复")]):t._e(),t._v(" "),e.commentE.user&&e.commentE.user.userId==t.account?n("div",{staticClass:"delet-comment",on:{click:function(n){t.deletionComment(e,o,t.commentList)}}},[t._v("删除")]):t._e()]):t._e()]):t._e()}),t._v(" "),t.commentTotal>5?n("div",{staticClass:"comment_mutual_more"},[n("button",{on:{click:t.loadingMore}},[t._v(t._s(t.loadingMoreComment))])]):t._e()],2):t._e()},staticRenderFns:[]};var a=n("VU/8")(o,m,!1,function(t){n("6f5c")},"data-v-baaf3cd2",null);e.default=a.exports}});
//# sourceMappingURL=47.ff79e2d17cc19e98c85f.js.map
webpackJsonp([1],{QkQo:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){return{params:{content:null,filename:null},base64:[],base:new Array,imgList:[],content:"",jobInfo:{imgList:[]},base64_container:[],taskInfo:{},img_arr:[],editStatus:0}},methods:{cancel:function(){this.$router.back(-1)},publishWork:function(){var t=this;0!=this.content.length&&" "!=this.content.charAt(0)?0==this.editStatus?(this.$Indicator.open({text:"正在保存作品",spinnerType:"fading-circle"}),this.axios.get("/api/user/addWork",{params:{content:this.content,imagesUrl:this.img_arr.join(",")}}).then(function(e){t.$Indicator.close(),t.$Toast({message:"保存作品成功",position:"middle",duration:1e3}),setTimeout(function(){t.$router.push("/myWorkCircleCenter")},1e3)}).catch(function(t){})):1==this.editStatus&&(this.$Indicator.open({text:"正在保存作品",spinnerType:"fading-circle"}),this.axios.get("/api/user/updateWork",{params:{content:this.content,worksId:this.$route.params.id,imagesUrl:this.img_arr.join(",")}}).then(function(e){t.$Indicator.close(),t.$Toast({message:"保存作品成功",position:"middle",duration:1e3}),setTimeout(function(){t.$router.push("/myWorkCircleCenter")},1e3)}).catch(function(t){})):this.$Toast({message:"发布文字内容不能为空",position:"middle",duration:1e3})},changeImg:function(t){var e=this;if(t.target.files.length>0){this.base64.push(t.target.files);var i=window.webkitURL?window.webkitURL.createObjectURL(t.target.files[0]):window.URL.createObjectURL(t.target.files[0]);this.jobInfo.imgList.unshift(i);var n=new FileReader;n.readAsDataURL(t.target.files[0]),n.onload=function(t){e.axios.post("/api/upload_file",{content:t.target.result}).then(function(t){e.img_arr.unshift(t.data.data[0])})}}},deleteicon:function(t){var e=this;this.img_arr.forEach(function(i,n){n==t&&e.img_arr.splice(t,1)})}},mounted:function(){var t=this;"none"!==this.$route.params.id&&(this.editStatus=1,this.axios.get("/api/getWorkInfo",{params:{worksId:this.$route.params.id}}).then(function(e){var i=e.data.result.WorksE;t.content=i.content,i.contentPics&&i.contentPics.split(",").forEach(function(e){t.img_arr.push(e)})}).catch(function(t){}))}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("header",[n("a",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("span",[t._v("发布作品")]),t._v(" "),n("a",{on:{click:t.publishWork}},[t._v("发布")])]),t._v(" "),n("section",[n("div",{staticClass:"task_title"},[t._v(t._s(t.taskInfo.title))]),t._v(" "),n("div",{staticClass:"textarea_content"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{name:"work_content",id:"work_content",placeholder:"请输入您的内容......."},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"font_num"},[t._v("0/150")]),t._v(" "),n("div",{staticClass:"upload_file"},[n("div",{staticClass:"imgs_uploaded"},[t._l(t.imgList,function(e,i){return n("span",{key:i},[n("img",{attrs:{src:e,alt:"上传图片"}}),t._v(" "),n("span",{on:{click:function(n){t.__remove_img(n,e,i)}}},[t._v("×")])])}),t._v(" "),t.img_arr&&t.img_arr.length<9?n("div",{staticClass:"file_container"},[n("input",{ref:"file",staticClass:"file",attrs:{type:"file",id:"file",name:"file"},on:{change:function(e){t.changeImg(e)}}}),t._v(" "),n("img",{attrs:{src:i("YEen"),alt:"自定义上传组件"}})]):t._e(),t._v(" "),t._l(t.img_arr,function(e,i){return n("div",{key:i,staticClass:"file_container"},[n("span",{staticClass:"file_deleteicon",on:{click:function(e){t.deleteicon(i)}}},[t._v("×")]),t._v(" "),n("img",{attrs:{src:e,alt:"作业图片"}})])})],2)])])])},staticRenderFns:[]};var s=i("VU/8")(n,a,!1,function(t){i("dta5")},"data-v-eed3d638",null);e.default=s.exports},YEen:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGkAAABkCAIAAAAKfomzAAADEUlEQVR4Ae3bvYpiQRAF4FVXRERQEQZFDczMRXNDX9BH8QEMDMTYzMRIRRDBv0S3FuEyNTNNU+e2S7Mcg8G2q3r6fvdo0prZ7XaPx+MXHxaBWq2Wz+ezlhbWKgHaKQ7TgHYmLlVMO8VhGtDOxKWKaac4TAPambhUMe0Uh2lAOxOXKqad4jANaGfiUsW0UxymAe1MXKqYdorDNKCdiUsV005xmAa0M3GpYtopDtOAdiYuVUw7xWEa0M7EpYp/q1E0g+fz+dpLJpOJZlNfNxJ17kQwQfy68QjGkebueDwuFovT6TQYDDqdTgRQP2whxtxJ1s7n83K5nM1m2+022ujFaCe3+O979fmULyzI3x/ueBwvRWr3wokZTnYYtV0c8XLugnZOGu8E7bxEzgLaOWm8E7TzEjkLaOek8U7QzkvkLKCdk8Y7QTsvkbOAdk4a7wTtvETOAto5abwTtPMSOQto56TxTtDOS+QsoJ2TxjtBOy+Rs4B2ThrvBO28RM4C2jlpvBOZsL+f3e/3k8kk5RmNtN9ut81mc71e2+12tVpN+e2Abrc7Go2azWbKdRLN1+9nA59tXy6X+Xye/sfMif5qtUp/wXIP+v1+o9GQi0+/WiIYOHf3+329XidXnvwb0xNpl3fDdDo9HA7j8bjX65navxeXSqV6vV4sFrPZMJ9Rb8ldoVBIf6liVy6XK5WKpLjVasmCocIiK4daSu5QmPvw/VanfCW5wuRJygVf7WFXi9QuiNS7F6EdLkw72uECeCdzRztcAO9k7miHC+CdzB3tcAG8k7mjHS6AdzJ3tMMF8E7mjna4AN7J3NEOF8A7mbv/zk4OZeSBX9Y/6Yw0d3IoE/Zc5h2Ygc+2Q21RzhiHw6H8bvvj4yPUmsHXCXy2HWp/8oaVLxfIQ06jc7lcqGVDrfOWs+1Qm5M3rJBFqPb5AiP9vPu8xWif0w6/NbSjHS6AdzJ3tMMF8E7mjna4AN7J3NEOF8A7mTva4QJ4J3NHO1wA72TuaIcL4J3MHe1wAbyTuaMdLoB3Mne0wwXwTuYOt/sD4+WjFgSWhv4AAAAASUVORK5CYII="},dta5:function(t,e){}});
//# sourceMappingURL=1.47e15147c97958efb0b4.js.map